---
title: 大数据可视化
date: 2022-12-01
cover: /images/2052108.jpg
tags:
  - echarts
  - vue3
  - typescript
categories:
  - 学习笔记
sticky: false
---

::: tip 介绍
大数据可视化，echarts基本学习
:::

<!-- more -->
# 数据可视化

## 1.了解数据可视化

**[数据](https://baike.baidu.com/item/数据/5947370?fromModule=lemma_inlink)可视化主要旨在借助于图形化手段，清晰有效地传达与沟通信息。但是，这并不就意味着数据可视化就一定因为要实现其功能用途而令人感到枯燥乏味，或者是为了看上去绚丽多彩而显得极端复杂。为了有效地传达思想概念，美学形式与功能需要齐头并进，通过直观地传达关键的方面与特征，从而实现对于相当稀疏而又复杂的[数据集](https://baike.baidu.com/item/数据集?fromModule=lemma_inlink)的深入洞察。然而，设计人员往往并不能很好地把握设计与功能之间的平衡，从而创造出华而不实的数据可视化形式，无法达到其主要目的，也就是传达与沟通信息。**

**数据可视化与信息图形、信息可视化、科学可视化以及统计图形密切相关。当前，在研究、教学和开发领域，数据可视化乃是一个极为活跃而又关键的方面。“数据可视化”这条术语实现了成熟的科学可视化领域与较年轻的信息可视化领域的统一。**

**数据可视化的意义**

- 数据可视化的意义是帮助人更好的分析数据
- 数据可视化增加数据的灵性



## 2.echarts

1. **丰富的可视化类型**
2. **多数据格式无需转换**
3. **千万级别数据进行展示**
4. **移动端优化**
5. **多渲染方案跨平台使用**
6. **深度的交互方案**
7. **动态数据**
8. **绚丽的特效**



## 3.hello world

```vue
<template>
  <div>
    <div ref="box1" :style="{width:'500px',height:'500px'}"></div>
  </div>
</template>

<script setup lang="ts">
import * as echarts from 'echarts'
import {EChartsOption} from 'echarts'
import { onMounted, ref } from 'vue';
const box1=ref()

onMounted(()=>{
  const myEcharts=echarts.init(box1.value)
  const  option=<EChartsOption>{
    //设置标题
    title:{
      text:'hello world'
    },
    //设置x轴
    xAxis:{
      data:[
        "EZ",
        "VN",
        "NOC",
        "MF"
      ]
    },
    //设置y轴
    yAxis:{

    },
    //设置系列
    series:{
      name:"lol英雄大全",
      //设置图标类型
      type:"bar",
      data:[6300,4500,3800,900]
    }
  }
  myEcharts.setOption(option)
})
</script>

<style scoped>
div[style]{
  border: 1px solid black;
}
</style>
```

## 4.[title配置项](https://echarts.apache.org/zh/option.html#title)

```vue
<template>
  <div>
    <div ref="box1" :style="{width:'70%',height:'500px'}"></div>
  </div>
</template>

<script setup lang="ts">
import * as echarts from 'echarts'
import { EChartsOption } from 'echarts'
import { onMounted, ref } from 'vue';
const box1 = ref()

onMounted(() => {
  const myEcharts = echarts.init(box1.value)
  const option = <EChartsOption>{
    title: {
      show: true, //显示策略，默认值true,可选为：true（显示） | false（隐藏）
      text: "1主标题", //主标题文本，'\n'指定换行
      // link:'http://www.baidu.com', //主标题文本超链接,默认值true 
      // target: "self", //指定窗口打开主标题超链接，支持'self' | 'blank'，不指定等同为'blank'（新窗口） 
      subtext: '副标题', //副标题文本，'\n'指定换行 
      // sublink: '', //副标题文本超链接 
      // subtarget: null, //指定窗口打开副标题超链接，支持'self' | 'blank'，不指定等同为'blank'（新窗口） 
      // x:'center', //水平安放位置，默认为'left'，可选为：'center' | 'left' | 'right' | {number}（x坐标，单位px） 
      // y: 'bottom', //垂直安放位置，默认为top，可选为：'top' | 'bottom' | 'center' | {number}（y坐标，单位px） 
      // backgroundColor: 'red', //标题背景颜色，默认'rgba(0,0,0,0)'透明 
      // borderWidth: 5, //标题边框线宽，单位px，默认为0（无边框） 
      // borderColor: '#ccffee', //标题边框颜色,默认'#ccc' 
      // padding: 5, //标题内边距，单位px，默认各方向内边距为5，接受数组分别设定上右下左边距 
      // itemGap: 10, //主副标题纵向间隔，单位px，默认为10 
      // textStyle: { //主标题文本样式{"fontSize": 18,"fontWeight": "bolder","color": "#333"} 
      // fontFamily: 'Arial, Verdana, sans...', 
      // fontSize: 12, 
      // fontStyle: 'normal', 
      // fontWeight: 'normal', // }, 
      // subtextStyle: {//副标题文本样式{"color": "#aaa"} 
      // fontFamily: 'Arial, Verdana, sans...', 
      // fontSize: 12, 
      // fontStyle: 'normal', 
      // fontWeight: 'normal', 
      // },
      // subtextStyle: {
      //   color: "#a1b2c3", // 副标题文字的颜色。
      //   fontStyle: "normal", // 副标题文字字体的风格。 'normal'  'italic'  'oblique'
      //   fontWeight: "bold", // 副标题文字字体的粗细。 'normal' 'bold'  'bolder'  'lighter' 500|600。
      //   fontSize: 18, // 字体大小
      //   lineHeight: "130", // 行高
      //   textBorderColor: "red", // 文字本身的描边颜色。
      //   textBorderWidth: 5, // 文字本身的描边宽度。
      //   textShadowColor: "transparent", // 文字本身的阴影颜色。
      //   textShadowBlur: 0, // 文字本身的阴影长度。
      //   textShadowOffsetX: 0, // 文字本身的阴影 X 偏移。
      //   textShadowOffsetY: 0, //  文字本身的阴影 Y 偏移。
      // },
    },
    xAxis: {
      data: ["衬衫", "羊毛衫", "雪纺衫", "裤子", "高跟鞋", "袜子"],
    },
    yAxis: {},
    series: [
      {
        name: "销量",
        type: "bar",
        data: [5, 20, 36, 10, 10, 20],
      },
    ],
  }
  myEcharts.setOption(option)
  window.onresize = () => {
    myEcharts.resize()
  }
})
</script>

<style scoped>
div[style] {
  border: 1px solid black;
}
</style>
```

## 5.封装成hooks

**1.把初始化相关的逻辑放入hooks中**

```typescript
import * as echarts from "echarts";
import { EChartsOption } from "echarts";
import { onMounted, Ref } from "vue";
export const useEcharts = (options: EChartsOption, dom: Ref<HTMLElement>) =>
  onMounted(() => {
    const myEcharts = echarts.init(dom.value);
    myEcharts.setOption(options);
    window.onresize = () => {
      myEcharts.resize();
    };
  });

```

**2.抽离配置项**

```typescript
import { EChartsOption } from "echarts";

export const options=<EChartsOption>{
    title:{
        text:"水果销量"
    },
    xAxis:{
        data:['苹果','香蕉','梨子','葡萄']
    },
    yAxis:{},
    series:{
        name:"水果大全",
        type:"bar",
        data:[100,58,99,237]
    }
}
```

**3.在vue中组合使用**

```vue
<template>
  <div>
    <div ref="box1" :style="{width:'70%',height:'500px'}"></div>
  </div>
</template>

<script setup lang="ts">
import {  ref } from 'vue';
import {useEcharts} from './hooks/useEcharts'
import {options} from './options/01-tooltip'
const box1 = ref()
useEcharts(options,box1)

</script>

<style scoped>
div[style] {
  border: 1px solid black;
}
</style>
```



## 6.[tooltip配置项](https://echarts.apache.org/zh/option.html#tooltip)

**提示框组件的通用介绍：**

提示框组件可以设置在多种地方：

- 可以设置在全局，即 [tooltip](https://echarts.apache.org/zh/option.html#tooltip)
- 可以设置在坐标系中，即 [grid.tooltip](https://echarts.apache.org/zh/option.html#grid.tooltip)、[polar.tooltip](https://echarts.apache.org/zh/option.html#polar.tooltip)、[single.tooltip](https://echarts.apache.org/zh/option.html#single.tooltip)
- 可以设置在系列中，即 [series.tooltip](https://echarts.apache.org/zh/option.html#series.tooltip)
- 可以设置在系列的每个数据项中，即 [series.data.tooltip](https://echarts.apache.org/zh/option.html#series.data.tooltip)

```typescript
import { EChartsOption } from "echarts";

export const options = <EChartsOption>{
  title: {
    text: "水果销量",
  },
  tooltip: {
    //触发类型
    trigger: "axis",
    //坐标轴指示器
    axisPointer: {
      type: "cross",
    },
    //是否显示提示框
    showContent: true,
    //悬浮窗样式
    backgroundColor: "yellow",
    borderColor: "red",
    borderWidth: 2,
    textStyle: {
      /* fontSize:24, */
      color: "black",
    },
    //自定义提示框信息
    formatter: (params: any) => {
      for (let i of params) {
        console.log(i);
        return `<p>名称：${i.axisValue}</P><P>价格:${i.data.value}</p><P>日期:${i.data.date}</p>`;
      }
    },
  },
  xAxis: {
    data: ["苹果", "香蕉", "梨子", "葡萄"],
  },
  yAxis: {},
  series: {
    name: "水果大全",
    type: "bar",
    data: [
      {
        value: 25,
        date: "2022-2-1",
      },
      {
        value: 28,
        date: "2022-3-1",
      },
      {
        value: 49,
        date: "2022-1-5",
      },
      {
        value: 53,
        date: "2021-11-16",
      },
    ],
  },
};

```

## 7.[lenged配置项](https://echarts.apache.org/zh/option.html#legend)

图例组件。

图例组件展现了不同系列的标记(symbol)，颜色和名字。可以通过点击图例控制哪些系列不显示。

ECharts 3 中单个 echarts 实例中可以存在多个图例组件，会方便多个图例的布局。

当图例数量过多时，可以使用 [滚动图例（垂直）](https://echarts.apache.org/examples/zh/editor.html?c=pie-legend&edit=1&reset=1) 或 [滚动图例（水平）](https://echarts.apache.org/examples/zh/editor.html?c=radar2&edit=1&reset=1)，参见：[legend.type](https://echarts.apache.org/zh/option.html#legend.type)

```typescript
import { EChartsOption } from "echarts";

export const options = <EChartsOption>{
  title: {
    text: "水果销量",
  },
  tooltip: {
    
  },
  xAxis: {
    data: ["苹果", "香蕉", "梨子", "葡萄"],
  },
  yAxis: {},
  series: {
    name: "水果大全",
    type: "bar",
    data: [
      15,24,66,58
    ],
  },
  //图例配置项
  legend:{
    //开启
    show:true,
    //设置legend形状
    /* icon:"circle" */
    /* top:"10%", */
    bottom:"5%",
    right:"5%",
    //图例宽高
    itemWidth:30,
    itemHeight:10,
    textStyle:{
        color:'red',
        fontSize:20,
        backgroundColor:"yellow"
    },
    itemStyle:{
        borderColor:"blue",
        borderWidth:3
    }
  }
};

```

```vue
<template>
  <div class="about">
    <h1>This is an about page</h1>
    <div id="main"></div>
  </div>
</template>
<script>
import * as echarts from "echarts";
export default {
  mounted() {
    var myChart = echarts.init(document.getElementById("main"));
    myChart.setOption({
      title: {
          text: '主标题'
      },
      tooltip: {
        
      },

      legend: {
        show: true, //是否显示
        icon: "circle",//图例样式
        // top: "55%", // 组件离容器的距离
        // bottom:"20%", // 组件离容器的距离
        // left 的值可以是像 20 这样的具体像素值，可以是像 '20%' 这样相对于容器高宽的百分比，也可以是 'left', 'center', 'right'
        // right: "5%", 
        // left:"10%" // // 组件离容器的距离
        // padding: 5, // 图例内边距
        // itemWidth: 6, // 图例标记的图形宽度。
        // itemGap: 20, // 图例每项之间的间隔。
        // itemHeight: 14, // 图例标记的图形高度。
        // selectedMode: false, // 图例选择的模式，控制是否可以通过点击图例改变系列的显示状态。默认开启图例选择，可以设成 false 关闭。
        inactiveColor: "#fffddd", // 图例关闭时的颜色。
        textStyle: {//图例的公用文本样式。
          // color: "#aabbcc", // 文字的颜色。
          // fontStyle: "normal", // 文字字体的风格。'italic'
          // fontWeight: "normal", // 文字字体的粗细。 'normal' 'bold' 'bolder' 'lighter' 100 | 200 | 300 | 400...
          // fontFamily: "sans-serif", // 文字的字体系列。
          // fontSize: 12, // 文字的字体大小。
          // lineHeight: 20, // 行高。
          // backgroundColor: "transparent", // 文字块背景色。
          // borderColor: "transparent", // 文字块边框颜色。
          // borderWidth: 0, // 文字块边框宽度。
          // borderRadius: 0, // 文字块的圆角。
          // padding: 0, // 文字块的内边距
          // shadowColor: "transparent", // 文字块的背景阴影颜色
          // shadowBlur: 0, // 文字块的背景阴影长度。
          // shadowOffsetX: 0, // 文字块的背景阴影 X 偏移。
          // shadowOffsetY: 0, // 文字块的背景阴影 Y 偏移。
          // // width: 50, // 文字块的宽度。 默认
          // // height: 40, // 文字块的高度 默认
          // textBorderColor: "transparent", // 文字本身的描边颜色。
          // textBorderWidth: 0, // 文字本身的描边宽度。
          // textShadowColor: "transparent", // 文字本身的阴影颜色。
          // textShadowBlur: 0, // 文字本身的阴影长度。
          // textShadowOffsetX: 0, // 文字本身的阴影 X 偏移。
          // textShadowOffsetY: 0, // 文字本身的阴影 Y 偏移。
        }
      },
      xAxis: {
        data: ["衬衫", "羊毛衫", "雪纺衫", "裤子", "高跟鞋", "袜子"],
      },
      yAxis: {},
      series: [
        {
          name: "销量",
          type: "bar",
          data: [5, 20, 36, 10, 10, 20],
        },
      ],
    });
  },
};
</script>
<style>
#main {
  width: 500px;
  height: 500px;
}
</style>
```

## 8.[基本柱状图](https://echarts.apache.org/zh/option.html#series-bar.type)

```typescript
import { EChartsOption } from "echarts";

let xData = ["美食", "数码", "日化", "蔬菜"];

let yData = [99, 67, 45, 87];

export const options: EChartsOption = {
  title: {
    text: "主标题",
  },
  xAxis: {
    data: xData,
    type: "category",
  },
  yAxis: {},
  series: [
    {
      name: "销量",
      data: yData,
      type: "bar",
      //最大值/最小值
      //标记点
      markPoint: {
        data: [
          //标注的对象数组，每一项都是一个对象
          {
            type: "max",
            name: "最大值",
          },
          {
            type: "min",
            name: "最小值",
          },
        ],
      },
      //标记线
      markLine:{
        data:[
            {
                type:"average",
                name:"平均值"
            }
        ]
      }
    },
  ],
  legend: {},
  tooltip: {
    trigger: "axis",
    axisPointer: {
      type: "cross",
    },
  },
};

```

![image-20221122172847929](DataVisualization.assets/image-20221122172847929.png)

## 9.水平柱状图

![image-20221122174739866](DataVisualization.assets/image-20221122174739866.png)

```typescript
import { EChartsOption } from "echarts";

let xData = ["美食", "数码", "日化", "蔬菜"];

let yData = [99, 67, 45, 87];

export const options: EChartsOption = {
  title:{
    text:"水平柱状图"
  },
  xAxis:{
    //设置为数据轴
    type:"value"
  },
  yAxis:{
    data:xData,
    //设置为类目轴
    type:"category"
  },
  series:{
    //柱状图
    type:'bar',
    name:"销量",
    data:yData,
    markPoint:{
        data:[
            {
                type:"max",
                name:"最大值"
            },
        ]
    },
    markLine:{
        data:[
            {
                type:"average",
                name:"平均值"
            }
        ]
    },
    //设置柱状图宽度
    barWidth:"30px",
    //设置条型颜色
    color:"orange",
    //单独设置轴的颜色
    itemStyle:{
        color(params) {
            let colorList=[
                '#c23531',
                '#cc4587',
                '#66dccc',
                '#ddcb12'
            ]
            //根据索引设置颜色
            return colorList[params.dataIndex]
        },
    }
  },
  legend:{

  },
  tooltip:{
    axisPointer:{
        type:"cross"
    }
  }
};

```

## 10.饼状图

**设置饼状图不加xAxis和yAxis配置项**

```typescript
import { EChartsOption } from "echarts";

let data = [
  { name: "美食", value: 67 },
  { name: "数码", value: 58 },
  { name: "日化", value: 44 },
  { name: "蔬菜", value: 32 },
];

export const options: EChartsOption = {
  title: {
    text: "饼状图",
    textStyle: {
      color: "green",
    },
    left: "center",
  },
  series: {
    //设置为饼状图
    type: "pie",
    name:"销量统计",
    data: data,
  },
  legend:{
    //设置位置
    left:"left",
    //设置朝向
    orient:"vertical"
  },
  tooltip:{}
};

```

## 11.南丁格尔图

![image-20221122202746989](DataVisualization.assets/image-20221122202746989.png)

```typescript
import { EChartsOption } from "echarts";

let data = [
  { name: "美食", value: 67 ,itemStyle:{color:'#c23531'}},
  { name: "数码", value: 58 ,itemStyle:{color:'#cc4587'}},
  { name: "日化", value: 44 ,itemStyle:{color:'#66dccc'}},
  { name: "蔬菜", value: 32 ,itemStyle:{color:'#ddcb12'}},
];

export const options: EChartsOption = {
  title: {
    text: "饼状图",
    textStyle: {
      color: "green",
    },
    left: "center",
  },
  series: {
    //设置为饼状图
    type: "pie",
    name:"销量统计",
    data: data,
    //设置饼图半径
    //环形图
    radius:["30%","70%"],
    //饼状图的文本标签
    label:{
        show:true,
        //设置文本位置
        position:'inside'
    },
    //是否设置成南丁格尔图
    roseType:"area",
    itemStyle:{
        /* color(params) {
            let colors=[
                '#c23531',
                '#cc4587',
                '#66dccc',
                '#ddcb12'
            ]
            return colors[params.dataIndex]
        }, */
        shadowBlur:20,
        shadowColor:"rgba(0,0,0,.5)",
        shadowOffsetX:10,
        shadowOffsetY:5
    }
  },
  legend:{
    //设置位置
    left:"left",
    //设置朝向
    orient:"vertical"
  },
  tooltip:{}
};

```

## 12.折线图

![image-20221122202838616](DataVisualization.assets/image-20221122202838616.png)

```typescript
import { EChartsOption } from "echarts";

let xDate=["Mon","Tun","wen","Thu","Fri","Sat","Sun"]
let data=[120,130,150,110,124,126,165]
export const options:EChartsOption={
    title:{
        text:"折线图",
        left:"center",
        textStyle:{
            color:"blue",
        }
    },
    legend:{
        left:"left",
        orient:"vertical"
    },
    tooltip:{
        trigger:"axis",
        axisPointer:{
            type:"cross"
        }
    },
    series:{
        //设置折线图
        type:"line",
        data,
        name:"周销量"
    },
    xAxis:{
        data:xDate,
        type:"category"
    },
    yAxis:{
        type:"value"
    }
}
```

![image-20221122204700075](DataVisualization.assets/image-20221122204700075.png)

```typescript
import { EChartsOption } from "echarts";

let xDate = ["Mon", "Tun", "wen", "Thu", "Fri", "Sat", "Sun"];
let data = [120, 130, 150, 110, 124, 126, 165];
export const options: EChartsOption = {
  title: {
    text: "折线图",
    left: "center",
    textStyle: {
      color: "blue",
    },
  },
  legend: {
    left: "left",
    orient: "vertical",
    /* icon:"rect" */
  },
  tooltip: {
    trigger: "axis",
    axisPointer: {
      type: "cross",
    },
  },
  series: {
    //设置折线图
    type: "line",
    data,
    name: "周销量",
    //开启平滑过渡
    smooth: true,
    color: "orange",
    //内容填充
    areaStyle: {
      color: "#cccccc",
    },
    //标记点
    markPoint: {
      //文字样式
      label: {
        color: "white",
      },
      //标记点样式
      itemStyle: {
        color: "#eecc33",
      },
      data: [
        {
          type: "max",
          name: "最大值",
        },
        {
          type: "min",
          name: "最小值",
        },
      ],
    },
    markLine: {
      itemStyle: {
        color: "red",
      },
      data: [
        {
          type: "average",
          name: "平均值",
        },
      ],
    },
    itemStyle: {
      color(params) {
        let list = [
          "#c23531",
          "#cc4587",
          "#66dccc",
          "#ddcb12",
          "#d6e6a2",
          "#de11a2",
          "#ccaabb",
        ];
        return list[params.dataIndex];
      },
    },
  },
  xAxis: {
    data: xDate,
    type: "category",
  },
  yAxis: {
    type: "value",
  },
};

```

## 13.折线图堆叠

![image-20221122210616195](DataVisualization.assets/image-20221122210616195.png)

```typescript
import { EChartsOption } from "echarts";

let xDate = ["Mon", "Tun", "wen", "Thu", "Fri", "Sat", "Sun"];
let data1 = [120, 130, 150, 110, 124, 126, 165];
let data2 = [122, 100, 159, 144, 120, 128, 166];
let data3 = [90, 80, 95, 110, 98, 120, 143];
let data4 = [100, 105, 109, 110, 124, 131, 145];
export const options: EChartsOption = {
  title: {
    text: "折线图",
    left: "center",
    textStyle: {
      color: "blue",
    },
  },
  legend: {
    left: "left",
    orient: "vertical",
    /* icon:"rect" */
  },
  tooltip: {
    trigger: "axis",
    axisPointer: {
      type: "cross",
    },
  },
  series: [
    {
      //设置折线图
      type: "line",
      data: data1,
      name: "美食",
      //数据的堆叠
      stack: "num",
      //平滑的
      smooth: true,
      areaStyle: {},
      //设置选中状态
      emphasis:{
        focus:"series"
      }
    },
    {
      name: "日化",
      stack: "num",
      data: data2,
      type: "line",
      smooth: true,
      areaStyle: {},
      emphasis:{
        focus:"series"
      }
    },
    {
      name: "蔬菜",
      stack: "num",
      data: data3,
      type: "line",
      smooth: true,
      areaStyle: {},
      emphasis:{
        focus:"series"
      }
    },
    {
      name: "数码",
      stack: "num",
      data: data4,
      type: "line",
      smooth: true,
      areaStyle: {},
      //选中高亮状态
      emphasis:{
        focus:"series"
      }
    },
  ],
  xAxis: {
    data: xDate,
    type: "category",
  },
  yAxis: {
    type: "value",
  },
};

```

## 14.散点图

![image-20221123101256297](DataVisualization.assets/image-20221123101256297.png)

**散点图数据需要在series的date里传入数组，每个数组对应一个点的横纵坐标**

```typescript
import { EChartsOption } from "echarts";

export const options: EChartsOption = {
  title: {
    text: "散点图",
    left: "center",
  },
  xAxis: {},
  yAxis: {},
  legend: {
    left:"left",
    orient:"vertical",
    icon:"rect"
  },
  tooltip: {
    trigger: "axis",
    axisPointer: {
      type: "cross",
    },
  },
  series: {
    data: [
      [9.0, 7.04],
      [18.07, 4.33],
      [3.0, 9.65],
      [9.05, 8.23],
      [18.0, 9.76],
      [15.0, 7.56],
      [23.4, 5.31],
      [10.1, 7.47],
      [16.0, 8.26],
      [12.7, 3.53],
      [9.35, 7.2],
      [7.4, 8.2],
      [3.07, 4.82],
      [18.2, 6.83],
      [2.02, 4.47],
      [1.05, 3.33],
      [4.05, 4.96],
      [6.03, 7.24],
      [17.0, 6.55],
      [12.0, 8.84],
      [8.18, 5.82],
      [6.32, 5.68],
    ],
    name: "分布情况",
    //设置散点图
    type: "scatter",
    //设置点大小
    symbolSize:5
  },
};
```

![image-20221123102700371](DataVisualization.assets/image-20221123102700371.png)

```typescript
import { EChartsOption } from "echarts";

export const options: EChartsOption = {
  title: {
    text: "散点图",
    left: "center",
  },
  xAxis: {},
  yAxis: {},
  legend: {
    left:"left",
    orient:"vertical",
    icon:"rect"
  },
  tooltip: {
    trigger: "axis",
    axisPointer: {
      type: "cross",
    },
  },
  series: {
    data: [
      [9.0, 7.04],
      [18.07, 4.33],
      [3.0, 9.65],
      [9.05, 8.23],
      [18.0, 9.76],
      [15.0, 7.56],
      [23.4, 5.31],
      [10.1, 7.47],
      [16.0, 8.26],
      [12.7, 3.53],
      [9.35, 7.2],
      [7.4, 8.2],
      [3.07, 4.82],
      [18.2, 6.83],
      [2.02, 4.47],
      [1.05, 3.33],
      [4.05, 4.96],
      [6.03, 7.24],
      [17.0, 6.55],
      [12.0, 8.84],
      [8.18, 5.82],
      [6.32, 5.68],
    ],
    name: "分布情况",
    //设置散点图
    type: "scatter",
    //设置点大小
    symbolSize:20,
    //配置渐变色
    color:{
        type:"linear",
        x:0,
        x2:1,
        y:1,
        y2:0,
        colorStops:[
            {
                offset:0,
                color:"#ccdcaa"
            },
            {
                offset:0.5,
                color:"blue"
            },
            {
                offset:1,
                color:"green"
            }
        ]

    },
    //强调提示
    emphasis:{
        /* focus:"self", */
        scale:2,
        itemStyle:{
            color:'purple',
            borderColor:"orange",
            borderWidth:5
        }
    }
  },
};

```

## 15.配置项grid

直角坐标系内绘图网格，单个 grid 内最多可以放置上下两个 X 轴，左右两个 Y 轴。可以在网格上绘制[折线图](https://echarts.apache.org/zh/option.html#series-line)，[柱状图](https://echarts.apache.org/zh/option.html#series-bar)，[散点图（气泡图）](https://echarts.apache.org/zh/option.html#series-scatter)。

![image-20221123104141042](DataVisualization.assets/image-20221123104141042.png)

```typescript
import { EChartsOption } from "echarts";

export const options:EChartsOption={
    title:{
        text:"grid配置项",
        left:'center',
    },
    xAxis:{
        data:['香蕉','苹果','梨子','葡萄']
    },
    yAxis:{},
    legend:{
        left:"left",
        orient:"vertical"
    },
    tooltip:{
        trigger:"axis",
        axisPointer:{
            type:"cross"
        }
    },
    series:{
        type:"bar",
        name:"水果销量",
        data:[100,52,69,78],
        barWidth:25
    },
    // grid配置项：图标离容器的距离
    // show:是否显示直角坐标系网格-----------值:true?false
    // left:图表离容器左侧的距离-----------------值:number?百分比
    // top:图表离容器顶部的距离-----------------值:number?百分比
    // right:图表离容器右侧的距离---------------值:number?百分比
    // bottom:图表离容器底部的距离------------值:number?百分比
    // backgroundColor:网格背景色-------------值:rgba或#000000
    // borderColor:网格的边框颜色--------------值:rgba或#000000
    // borderWidth:网格的边框线宽-------------值:number
    //配置grid
    //设置网格的样式
    grid:{
        //距离边框的距离
        left:"20%",
        top:"20%",
        bottom:"20%",
        right:"20%",
        //展示边框
        show:true,
        backgroundColor:"#cce",
        borderColor:"green"
    }
}
```

## 16.k线图

![image-20221123112914572](DataVisualization.assets/image-20221123112914572.png)

```typescript
import { EChartsOption } from "echarts";
let xData = ["美食", "数码", "日化", "蔬菜"];

let yData = [
  [20, 34, 10, 38],
  [40, 35, 30, 50],
  [31, 38, 33, 44],
  [38, 15, 5, 42],
];
export const options: EChartsOption = {
    title:{
        text:"k线图",
        left:"center"
    },
  xAxis: {
    data: xData,
  },
  yAxis: {},
  legend:{
    left:"left",
    orient:"vertical"
  },
  grid:{
    left:"15%",
    top:"15%"
  },
  series: [
    {
      name: "k线图",
      type: "candlestick",
      data: yData,
      itemStyle: {
        //上涨颜色
        color: "#eeccaa",
        //下跌颜色
        color0: "#33eeaa",
        borderColor: "red",
        borderColor0: "#22ccee",
      },
      //标记点
      markPoint: {
        symbolSize: 40,
        label: {
          color: "white",
        },
        data: [
          {
            name: "最大值",
            type: "max",
            valueDim: "highest",
          },
          {
            name: "最小值",
            type: "min",
            valueDim: "lowest",
          },
        ],
        itemStyle: {
          color: "#3355ee",
        },
        emphasis: {
          label: {
            color: "black",
          },
          itemStyle: {
            borderColor: "#ccaadd",
            borderWidth: 5,
          },
        },
      },
      //标记线
      markLine: {
        label: {
          color: "orange",
          fontSize: 18,
        },
        itemStyle: {
          color: "purple",
        },
        data: [
          {
            type: "average",
            name: "平均值",
          },
        ],
      },
    },
    //堆叠线图
    {
        type:"line",
        smooth:true,
        data:yData.map(i=>i[0]),
        stack:"line",
        name:"open"
    },
    {
        type:"line",
        smooth:true,
        data:yData.map(i=>i[1]),
        stack:"line",
        name:"close"
    },
  ],
  tooltip: {
    trigger: "axis",
    axisPointer: {
      type: "cross",
    },
  },
};

```

## 17.雷达图

**不需要设置axis**

**在radar里配置雷达的样式，在series的data数组的每一项里配置具体的数据样式**

![image-20221123114334184](DataVisualization.assets/image-20221123114334184.png)

```typescript
import { EChartsOption } from "echarts";

export const options: EChartsOption = {
  title: {
    text: "雷达图",
  },
  radar: [
    {
        shape:"circle",
      //指示器
      indicator: [
        //雷达图的指示器，用来指定雷达图中的多个变量（维度）
        { name: "蔬菜", max: 6500 },
        { name: "水果", max: 16000 },
        { name: "熟食", max: 30000 },
        { name: "数码", max: 38000 },
        { name: "家电", max: 52000 },
        { name: "日化", max: 25000 },
      ],
    },
  ],
  tooltip:{},
  legend:{},
  series: [
    {
      type: "radar",
      data:[
        {
            value:[6200,7450,16666,26596,17344,9999],
            name:"销量"
        },
        {
            value:[1200,5450,15666,12696,12344,18969],
            name:"利润"
        }
      ]
    },
  ],
};

```

![image-20221123155943325](DataVisualization.assets/image-20221123155943325.png)

```typescript
import { EChartsOption } from "echarts";

export const options: EChartsOption = {
  title: {
    text: "雷达图",
  },
  radar: [
    {
      //形状
      shape: "polygon",
      //半径
      radius: 150,
      //坐标系的起始角度
      startAngle: 120,
      //分割线数量
      splitNumber: 5,
      //指示器
      indicator: [
        //雷达图的指示器，用来指定雷达图中的多个变量（维度）
        { name: "蔬菜", max: 6500 },
        { name: "水果", max: 16000 },
        { name: "熟食", max: 30000 },
        { name: "数码", max: 38000 },
        { name: "家电", max: 52000 },
        { name: "日化", max: 25000 },
      ],
      //分割区域
      splitArea: {
        /* areaStyle: {
          color: ["#1c2b", "#332dce", "#565978"],
        }, */
      },
      //分割线
      splitLine: {
        lineStyle: {
          color: ["red", "purple"],
        },
      },
      axisName: {
        color: "#ccaaee",
        fontSize: 18,
        formatter: "{value}",
      },
    },
  ],
  tooltip: {},
  legend: {},
  series: [
    {
      type: "radar",
      name: "总量",
      data: [
        {
          value: [6200, 7450, 16666, 26596, 17344, 9999],
          name: "销量",
          //设置具体的数据样式
          itemStyle:{
            color:"#ddcc11"
          },
          areaStyle:{
            color:"#11ccaa"
          }
        },
        {
          value: [1200, 5450, 15666, 12696, 12344, 18969],
          name: "利润",
          itemStyle:{
            color:'#ee1caa'
          },
          areaStyle:{
            color:"#ddccee"
          }
        },
      ],
      emphasis:{
        focus:"self"
      }
    },
  ],
};

```

## 18.漏斗图

**不需要设置axis**

**关键字funnel**

![image-20221123161912376](DataVisualization.assets/image-20221123161912376.png)

```typescript
import { EChartsOption } from "echarts";

export const options: EChartsOption = {
  title: {
    text: "漏斗图",
  },
  tooltip: {
    trigger: "item",
    formatter: "{a}<br/>{b}:{c}<br/>百分比:{d}%",
  },
  legend: {},
  series: [
    {
      type: "funnel",
      name:"销售量",
      data: [
        { value: 60, name: "美食" },
        { value: 40, name: "日化" },
        { value: 20, name: "数码" },
        { value: 80, name: "家电" },
        { value: 100, name: "蔬菜" },
      ],
      left:'10%',
      top:"20%",
      width:300
    },
  ],
};

```

![image-20221123162559375](DataVisualization.assets/image-20221123162559375.png)

```typescript
import { EChartsOption } from "echarts";

export const options: EChartsOption = {
  title: {
    text: "漏斗图",
  },
  tooltip: {
    trigger: "item",
    formatter: "{a}<br/>{b}:{c}<br/>百分比:{d}%",
  },
  legend: {},
  series: [
    {
      type: "funnel",
      name:"销售量",
      data: [
        { value: 60, name: "美食" },
        { value: 40, name: "日化" },
        { value: 20, name: "数码" },
        { value: 80, name: "家电" },
        { value: 100, name: "蔬菜" },
      ],
      left:'10%',
      top:"20%",
      width:300,
      //设置排序
      sort:"ascending",
      /* itemStyle:{
        borderColor:"red",
        borderWidth:5,
      }, */
      label:{
        show:true,
        position:"inner"
      },
      emphasis:{
        label:{
            fontSize:18
        }
      }
    },
  ],
};

```

## 19.仪表盘

**不需要设置axis**

![image-20221123164201651](DataVisualization.assets/image-20221123164201651.png)

```typescript
import { EChartsOption } from "echarts";

export const options:EChartsOption={
    title:{
        text:"速度70迈",
        left:"center"
    },
    tooltip:{},
    series:{
        type:"gauge",
        data:[
            {
                value:45,
                name:"提示信息"
            }
        ],
        //设置细节
        detail:{
            //显示动画
            valueAnimation:true
        },
        //显示进度条
        progress:{
            show:true
        }
    }
}
```

![image-20221123165516880](DataVisualization.assets/image-20221123165516880.png)

```typescript
import { EChartsOption } from "echarts";

export const options: EChartsOption = {
  title: {
    text: "速度70迈",
    left: "center",
  },
  tooltip: {},
  series: {
    type: "gauge",
    data: [
      {
        value: 45,
        name: "提示信息",
        itemStyle: {
          color: "rgba(241,35,254,.2)",
        },
      },
    ],
    //设置细节
    detail: {
      //显示动画
      valueAnimation: true,
    },
    //显示进度条
    progress: {
      show: true,
    },
    //指针
    pointer: {
      itemStyle: {
        color: "red",
      },
    },
    //进度条的线
    axisLine: {
      lineStyle: {
        color: [
          [0.25, "#cceeaa"],
          [0.5, "#aaccee"],
          [0.75, "#bbcc11"],
          [1, "#aa22cc"],
        ],
      },
    },
    //刻度线
    axisTick: {
      length: 12,
      lineStyle: {
        color: "auto",
        width: 2,
      },
    },
    //刻度线文字
    axisLabel:{
        color:'auto'
    }
  },
};

```



## 20.关系图

![image-20221123173102082](DataVisualization.assets/image-20221123173102082.png)

```typescript
import { EChartsOption, GraphSeriesOption } from "echarts";
const list:GraphSeriesOption["data"]=[
    {
        name:"张三",
        id:"1",
        itemStyle:{
            color:"#ffccaa"
        }
    },
    {
        name:"李四",
        id:"2",
        itemStyle:{
            color:"#f12caa"
        }
    },
    {
        name:"王五",
        id:"3",
        itemStyle:{
            color:"#3fccaa"
        }
    },
    {
        name:"老六",
        id:"4",
        itemStyle:{
            color:"#4fc4dd"
        }
    },
    {
        name:"刘备",
        id:"5",
        itemStyle:{
            color:"#1f1caa"
        }
    },
    {
        name:"张飞",
        id:"6",
        itemStyle:{
            color:"#ff2caa"
        }
    },
    {
        name:"关羽",
        id:"7",
        itemStyle:{
            color:"#ffcc3a"
        }
    },
]

const num=[
    {
        source:"1",//边的节点名称
        target:"2",//目标节点名称
        relation:"老婆"
    },
    {
        source:"2",//边的节点名称
        target:"1",//目标节点名称
        relation:"老婆"
    },
    {
        source:"3",//边的节点名称
        target:"1",//目标节点名称
        relation:"老婆"
    },
    {
        source:"4",//边的节点名称
        target:"5",//目标节点名称
        relation:"兄弟"
    },
    {
        source:"4",//边的节点名称
        target:"6",//目标节点名称
        relation:"兄弟"
    },
    {
        source:"5",//边的节点名称
        target:"6",//目标节点名称
        relation:"兄弟"
    },
    {
        source:"5",//边的节点名称
        target:"4",//目标节点名称
        relation:"兄弟"
    },
    {
        source:"6",//边的节点名称
        target:"4",//目标节点名称
        relation:"兄弟"
    },
    {
        source:"6",//边的节点名称
        target:"5",//目标节点名称
        relation:"兄弟"
    },
    {
        source:"6",//边的节点名称
        target:"7",//目标节点名称
        relation:"兄弟"
    }
]
export const options:EChartsOption={
    title:{
        text:"关系图"
    },
    series:[
        {
            //关系图
            type:"graph",
            data:list,
            layout:"force",
            symbolSize:30,
            //图形上的文字
            label:{
                show:true,
                position:"bottom",
                //距离图形的位置
                distance:6,
                align:"center",
            },
            links:num,
            force:{
                repulsion:100,
                edgeLength:200,
            },
            //设置关系提示文字
            edgeLabel:{
                show:true,
                position:"middle",
                color:"#2233dd",
                formatter:(params)=>{
                    return (params.data as any).relation
                }
            },
            //设置线条样式
            lineStyle:{
                color:"#ccaadd",
                width:3
            }
        }
    ]
}
```



## 21.数据区域缩放

### dataZoom

`dataZoom` 组件 用于区域缩放，从而能自由关注细节的数据信息，或者概览数据整体，或者去除离群点的影响。

现在支持这几种类型的 `dataZoom` 组件：

- [内置型数据区域缩放组件（dataZoomInside）](https://echarts.apache.org/zh/option.html#dataZoom-inside)：内置于坐标系中，使用户可以在坐标系上通过鼠标拖拽、鼠标滚轮、手指滑动（触屏上）来缩放或漫游坐标系。
- [滑动条型数据区域缩放组件（dataZoomSlider）](https://echarts.apache.org/zh/option.html#dataZoom-slider)：有单独的滑动条，用户在滑动条上进行缩放或漫游。
- [框选型数据区域缩放组件（dataZoomSelect）](https://echarts.apache.org/zh/option.html#toolbox.feature.dataZoom)：提供一个选框进行数据区域缩放。即 [toolbox.feature.dataZoom](https://echarts.apache.org/zh/option.html#toolbox.feature.dataZoom)，配置项在 `toolbox` 中。![image-20221123175620598](DataVisualization.assets/image-20221123175620598.png)

```typescript
import { EChartsOption } from "echarts";

let xData = ["美食", "数码", "日化", "蔬菜"];

let yData = [99, 67, 45, 87];

export const options: EChartsOption = {
  title: {
    text: "主标题",
    
  },
  xAxis: {
    data: xData,
    type: "category",
  },
  yAxis: {},
  series: [
    {
      name: "销量",
      data: yData,
      type: "bar",
      barWidth:25,
      //最大值/最小值
      //标记点
      markPoint: {
        data: [
          //标注的对象数组，每一项都是一个对象
          {
            type: "max",
            name: "最大值",
          },
          {
            type: "min",
            name: "最小值",
          },
        ],
      },
      //标记线
      markLine:{
        data:[
            {
                type:"average",
                name:"平均值"
            }
        ]
      }
    },
  ],
  legend: {},
  tooltip: {
    trigger: "item",
    axisPointer: {
      type: "cross",
    },
  },
  //设置区域缩放
  dataZoom:[
    {
        type:"slider",
        xAxisIndex:0,
        filterMode:"none"
    },
    {
        type:"slider",
        yAxisIndex:0,
        filterMode:"none"
    }
  ]
};

```

## 22.树图

![image-20221124150217574](DataVisualization.assets/image-20221124150217574.png)

```typescript
import { EChartsOption } from "echarts";
const list=[
    {
        name:"根节点",
        children:[
            {
                name:"层级2",
                children:[
                    {
                        name:"层级3-1",
                        value:546
                    },
                    {
                        name:"层级3-2",
                        children:[
                            {name:"数据1",value:2345},
                            {name:"数据2",value:1234},
                            {name:"数据3",value:134},
                            {name:"数据4",value:139},
                        ]
                    }
                ],
            }
        ]
    }
]
export const options:EChartsOption={
    tooltip:{
        trigger:"item"
    },
    series:[
        {
            type:"tree",
            data:list,
            symbolSize:20,
            label:{
                position:"left",
                verticalAlign:"middle",
                align:"center",
                fontSize:10
            },
            //配置叶子节点
            leaves:{
                label:{
                    position:"right",
                    verticalAlign:"middle",
                    align:"center",
                }
            },
            emphasis:{
                focus:"descendant"
            }
        }
    ]
}
```

![image-20221124150555431](DataVisualization.assets/image-20221124150555431.png)

```typescript
import { EChartsOption } from "echarts";
const list=[
    {
        name:"根节点",
        children:[
            {
                name:"层级2",
                children:[
                    {
                        name:"层级3-1",
                        value:546
                    },
                    {
                        name:"层级3-2",
                        children:[
                            {name:"数据1",value:2345},
                            {name:"数据2",value:1234},
                            {name:"数据3",value:134},
                            {name:"数据4",value:139},
                        ]
                    }
                ],
            }
        ]
    }
]
export const options:EChartsOption={
    tooltip:{
        trigger:"item"
    },
    series:[
        {
            type:"tree",
            data:list,
            symbolSize:20,
            //设置布局方向
            orient:"vertical",
            label:{
                position:"left",
                verticalAlign:"middle",
                align:"center",
                fontSize:10,
                //旋转文字
                rotate:25
            },
            //配置叶子节点
            leaves:{
                label:{
                    position:"right",
                    verticalAlign:"middle",
                    align:"center",
                }
            },
            emphasis:{
                focus:"descendant"
            }
        }
    ]
}
```

## 23.dataset

![image-20221124153252306](DataVisualization.assets/image-20221124153252306.png)

1. **先再dataset中设置分类信息和原始数据**
2. **在dataset中另起一个对象配置转换信息**
3. **在series中进行影射**
4. **设置datasetIndex为转换的那个对象对应的数组位置**

```typescript
import { EChartsOption } from "echarts";

/**
 * 数据集组件用于单独的数据集声明，从而数据可以单独管理，
 * 被多个组件复用，并且可以自由指定数据到视觉的映射。
 * 这在不少场景下能带来使用上的方便。
 */
export const options: EChartsOption = {
  dataset: [
    {
      //设置分类数据
      dimensions: ["类别", "数量"],
      //原始数据。一般来说，原始数据表达的是二维表。
      source: [
        ["美食", 123],
        ["日化", 98],
        ["熟食", 153],
        ["数码", 164],
        ["蔬菜", 103],
        ["杂项", 169],
      ],
    },
    {
      //数据改变
      transform: {
        type: "sort",
        config: {
          dimension: "数量",
          //"sort" 数据转换器的“条件”
          order: "desc",
        },
      },
    },
  ],
  xAxis: {
    type: "category",
    axisLabel: {
      //坐标轴刻度标签的相关设置。
      interval: 0, //坐标轴刻度标签的显示间隔，在类目轴中有效。
      rotate: 30, //刻度标签旋转的角度
    },
  },
  yAxis: {},
  series: [
    {
      type: "bar",
      name: "销量",
      //可以定义 data 的哪个维度被编码成什么。
      encode: {
        x: "类别", //x映射内容
        y: "数量",
      },
      datasetIndex: 1,
    },
  ],
};

```

## 24.自定义主题

![image-20221124160636938](DataVisualization.assets/image-20221124160636938.png)

```typescript
export const roma=
{
    "color": [
        "#d87c7c",
        "#919e8b",
        "#d7ab82",
        "#6e7074",
        "#61a0a8",
        "#efa18d",
        "#787464",
        "#cc7e63",
        "#724e58",
        "#4b565b"
    ],
    "backgroundColor": "rgba(254,248,239,1)",
    "textStyle": {},
    "title": {
        "textStyle": {
            "color": "#333333"
        },
        "subtextStyle": {
            "color": "#aaaaaa"
        }
    },
    "line": {
        "itemStyle": {
            "borderWidth": 1
        },
        "lineStyle": {
            "width": 2
        },
        "symbolSize": 4,
        "symbol": "emptyCircle",
        "smooth": false
    },
    "radar": {
        "itemStyle": {
            "borderWidth": 1
        },
        "lineStyle": {
            "width": 2
        },
        "symbolSize": 4,
        "symbol": "emptyCircle",
        "smooth": false
    },
    "bar": {
        "itemStyle": {
            "barBorderWidth": 0,
            "barBorderColor": "#ccc"
        }
    },
    "pie": {
        "itemStyle": {
            "borderWidth": 0,
            "borderColor": "#ccc"
        }
    },
    "scatter": {
        "itemStyle": {
            "borderWidth": 0,
            "borderColor": "#ccc"
        }
    },
    "boxplot": {
        "itemStyle": {
            "borderWidth": 0,
            "borderColor": "#ccc"
        }
    },
    "parallel": {
        "itemStyle": {
            "borderWidth": 0,
            "borderColor": "#ccc"
        }
    },
    "sankey": {
        "itemStyle": {
            "borderWidth": 0,
            "borderColor": "#ccc"
        }
    },
    "funnel": {
        "itemStyle": {
            "borderWidth": 0,
            "borderColor": "#ccc"
        }
    },
    "gauge": {
        "itemStyle": {
            "borderWidth": 0,
            "borderColor": "#ccc"
        }
    },
    "candlestick": {
        "itemStyle": {
            "color": "#c23531",
            "color0": "#314656",
            "borderColor": "#c23531",
            "borderColor0": "#314656",
            "borderWidth": 1
        }
    },
    "graph": {
        "itemStyle": {
            "borderWidth": 0,
            "borderColor": "#ccc"
        },
        "lineStyle": {
            "width": 1,
            "color": "#aaaaaa"
        },
        "symbolSize": 4,
        "symbol": "emptyCircle",
        "smooth": false,
        "color": [
            "#d87c7c",
            "#919e8b",
            "#d7ab82",
            "#6e7074",
            "#61a0a8",
            "#efa18d",
            "#787464",
            "#cc7e63",
            "#724e58",
            "#4b565b"
        ],
        "label": {
            "color": "#eeeeee"
        }
    },
    "map": {
        "itemStyle": {
            "areaColor": "#eeeeee",
            "borderColor": "#444444",
            "borderWidth": 0.5
        },
        "label": {
            "color": "#000000"
        },
        "emphasis": {
            "itemStyle": {
                "areaColor": "rgba(255,215,0,0.8)",
                "borderColor": "#444444",
                "borderWidth": 1
            },
            "label": {
                "color": "rgb(100,0,0)"
            }
        }
    },
    "geo": {
        "itemStyle": {
            "areaColor": "#eeeeee",
            "borderColor": "#444444",
            "borderWidth": 0.5
        },
        "label": {
            "color": "#000000"
        },
        "emphasis": {
            "itemStyle": {
                "areaColor": "rgba(255,215,0,0.8)",
                "borderColor": "#444444",
                "borderWidth": 1
            },
            "label": {
                "color": "rgb(100,0,0)"
            }
        }
    },
    "categoryAxis": {
        "axisLine": {
            "show": true,
            "lineStyle": {
                "color": "#333"
            }
        },
        "axisTick": {
            "show": true,
            "lineStyle": {
                "color": "#333"
            }
        },
        "axisLabel": {
            "show": true,
            "color": "#333"
        },
        "splitLine": {
            "show": false,
            "lineStyle": {
                "color": [
                    "#ccc"
                ]
            }
        },
        "splitArea": {
            "show": false,
            "areaStyle": {
                "color": [
                    "rgba(250,250,250,0.3)",
                    "rgba(200,200,200,0.3)"
                ]
            }
        }
    },
    "valueAxis": {
        "axisLine": {
            "show": true,
            "lineStyle": {
                "color": "#333"
            }
        },
        "axisTick": {
            "show": true,
            "lineStyle": {
                "color": "#333"
            }
        },
        "axisLabel": {
            "show": true,
            "color": "#333"
        },
        "splitLine": {
            "show": true,
            "lineStyle": {
                "color": [
                    "#ccc"
                ]
            }
        },
        "splitArea": {
            "show": false,
            "areaStyle": {
                "color": [
                    "rgba(250,250,250,0.3)",
                    "rgba(200,200,200,0.3)"
                ]
            }
        }
    },
    "logAxis": {
        "axisLine": {
            "show": true,
            "lineStyle": {
                "color": "#333"
            }
        },
        "axisTick": {
            "show": true,
            "lineStyle": {
                "color": "#333"
            }
        },
        "axisLabel": {
            "show": true,
            "color": "#333"
        },
        "splitLine": {
            "show": true,
            "lineStyle": {
                "color": [
                    "#ccc"
                ]
            }
        },
        "splitArea": {
            "show": false,
            "areaStyle": {
                "color": [
                    "rgba(250,250,250,0.3)",
                    "rgba(200,200,200,0.3)"
                ]
            }
        }
    },
    "timeAxis": {
        "axisLine": {
            "show": true,
            "lineStyle": {
                "color": "#333"
            }
        },
        "axisTick": {
            "show": true,
            "lineStyle": {
                "color": "#333"
            }
        },
        "axisLabel": {
            "show": true,
            "color": "#333"
        },
        "splitLine": {
            "show": true,
            "lineStyle": {
                "color": [
                    "#ccc"
                ]
            }
        },
        "splitArea": {
            "show": false,
            "areaStyle": {
                "color": [
                    "rgba(250,250,250,0.3)",
                    "rgba(200,200,200,0.3)"
                ]
            }
        }
    },
    "toolbox": {
        "iconStyle": {
            "borderColor": "#999999"
        },
        "emphasis": {
            "iconStyle": {
                "borderColor": "#666666"
            }
        }
    },
    "legend": {
        "textStyle": {
            "color": "#333333"
        }
    },
    "tooltip": {
        "axisPointer": {
            "lineStyle": {
                "color": "#cccccc",
                "width": 1
            },
            "crossStyle": {
                "color": "#cccccc",
                "width": 1
            }
        }
    },
    "timeline": {
        "lineStyle": {
            "color": "#293c55",
            "width": 1
        },
        "itemStyle": {
            "color": "#293c55",
            "borderWidth": 1
        },
        "controlStyle": {
            "color": "#293c55",
            "borderColor": "#293c55",
            "borderWidth": 0.5
        },
        "checkpointStyle": {
            "color": "#e43c59",
            "borderColor": "#c23531"
        },
        "label": {
            "color": "#293c55"
        },
        "emphasis": {
            "itemStyle": {
                "color": "#a9334c"
            },
            "controlStyle": {
                "color": "#293c55",
                "borderColor": "#293c55",
                "borderWidth": 0.5
            },
            "label": {
                "color": "#293c55"
            }
        }
    },
    "visualMap": {
        "color": [
            "#bf444c",
            "#d88273",
            "#f6efa6"
        ]
    },
    "dataZoom": {
        "backgroundColor": "rgba(47,69,84,0)",
        "dataBackgroundColor": "rgba(47,69,84,0.3)",
        "fillerColor": "rgba(167,183,204,0.4)",
        "handleColor": "#a7b7cc",
        "handleSize": "100%",
        "textStyle": {
            "color": "#333333"
        }
    },
    "markPoint": {
        "label": {
            "color": "#eeeeee"
        },
        "emphasis": {
            "label": {
                "color": "#eeeeee"
            }
        }
    }
}

```

```typescript
import * as echarts from "echarts";
import { EChartsOption } from "echarts";
import { onMounted, Ref } from "vue";
//引入主体文件
import { roma } from "../assets";
export const useEcharts = (options: EChartsOption, dom: Ref<HTMLElement>,theme?:Ref<string>) =>
  onMounted(() => {
    //在第二个参数中使用
    const myEcharts = echarts.init(dom.value,roma);
    myEcharts.setOption(options);
    window.onresize = () => {
      myEcharts.resize();
    };
  });

```

### 总结

1. **从官网下载主题**
2. **写入一个变量里**
3. **初始化的时候使用**

## 25.中国地图

1.准备echarts基本结构

2.设置中国地图的矢量数据创建js文件 （在其中创建变量接受json数据 并且暴露）

地图数据下载地址：https://datav.aliyun.com/portal/school/atlas/area_selector

3.在组件中获取地图矢量数据（引用数据json）

4.使用地图数据创建地图

![image-20221124163542905](DataVisualization.assets/image-20221124163542905.png)

[**获取北京市坐标**](http://api.map.baidu.com/lbsapi/getpoint/index.html)

```typescript
import { mapData } from './../assets/mapData';
import * as echarts from 'echarts'
import { EChartsOption } from 'echarts';
//注册地图
echarts.registerMap("chinaMap",mapData as any)
export const options:EChartsOption={
    //地理坐标组件
    geo:{
        type:"map",
        //使用地图
        map:"chinaMap",
        //开启平移缩放
        roam:true,
        //初始缩放比例为5
        zoom:5,
        //设置中心点
        center:[116.404763,39.914687]
    }
}
```

![image-20221124164957176](DataVisualization.assets/image-20221124164957176.png)

```typescript
import { scMap } from './../assets/scMap';
import { mapData } from './../assets/mapData';
import * as echarts from 'echarts'
import { EChartsOption } from 'echarts';
//注册地图
echarts.registerMap("chinaMap",mapData as any)
echarts.registerMap('scMap',scMap as any)
export const options:EChartsOption={
    //地理坐标组件
    geo:{
        type:"map",
        //使用地图
        map:"scMap",
        //开启平移缩放
        roam:true,
        //初始缩放比例为5
        label:{
            show:true,
            color:"#aacc11",
            fontSize:16
        },
        itemStyle:{
            areaColor:"#cc11cc"
        }
        /* zoom:5, */
        
        /* center:[116.404763,39.914687] */
    }
}
```

### 插入气泡点

![image-20221125092017140](DataVisualization.assets/image-20221125092017140.png)

```typescript
import { scMap } from "./../assets/scMap";
import { mapData } from "./../assets/mapData";
import * as echarts from "echarts";
import { EChartsOption } from "echarts";
//注册地图
echarts.registerMap("chinaMap", mapData as any);
echarts.registerMap("scMap", scMap as any);
export const options: EChartsOption = {
  //地理坐标组件
  geo: {
    type: "map",
    //使用地图
    map: "chinaMap",
    //开启平移缩放
    roam: true,
    //初始缩放比例为5
    zoom:5,
    center:[116.46, 39.92,]
  },
  series: [
    {
      type: "effectScatter",
      data: [
        {
          name: "北京市",
          value: [116.46, 39.92, 4000],
        },
      ],
      //设置映射到地图上
      coordinateSystem: "geo",
      symbolSize: 20,
      //设置涟漪效果
      rippleEffect:{
        //波纹数量
        number:5,
        //波纹大小
        scale:4
      },
      itemStyle:{
        color:'blue'
      }
    },
    {
        type: "scatter",
        data: [
          {
            name: "北京市",
            value: [108.95, 34.26, 4000],
          },
        ],
        coordinateSystem: "geo",
        symbolSize: 20,
      },
  ],
};

```

## 26.图标加载动画

```typescript

import axios from "axios";
import * as echarts from "echarts";
import { EChartsOption } from "echarts";
import { onMounted, Ref } from "vue";
export const useEcharts = (options: EChartsOption, dom: Ref<HTMLElement>,theme?:any) =>{
  
  onMounted(async() => {
    //在第二个参数中使用
    const myEcharts = echarts.init(dom.value,theme);
    //开启等待
    myEcharts.showLoading()
    const data=(await axios.get('http://localhost:3000/one')).data.data
    
    const options: EChartsOption = {
      title: {
        text: "饼状图",
        textStyle: {
          color: "green",
        },
        left: "center",
      },
      series: {
        //设置为饼状图
        type: "pie",
        name:"销量统计",
        data: data,
        //设置饼图半径
        //环形图
        radius:["30%","70%"],
        //饼状图的文本标签
        label:{
            show:true,
            //设置文本位置
            position:'inside'
        },
        //是否设置成南丁格尔图
        roseType:"area",
        itemStyle:{
            /* color(params) {
                let colors=[
                    '#c23531',
                    '#cc4587',
                    '#66dccc',
                    '#ddcb12'
                ]
                return colors[params.dataIndex]
            }, */
            shadowBlur:20,
            shadowColor:"rgba(0,0,0,.5)",
            shadowOffsetX:10,
            shadowOffsetY:5
        }
      },
      legend:{
        //设置位置
        left:"left",
        //设置朝向
        orient:"vertical"
      },
      tooltip:{}
    };
    myEcharts.setOption(options);
    //关闭等待
    myEcharts.hideLoading()
    window.onresize = () => {
      myEcharts.resize();
    };
  })
};

```

```typescript
import {
  Controller,
  Get,
  Post,
  Body,
  Patch,
  Param,
  Delete,
} from '@nestjs/common';
import { OneService } from './one.service';
import { CreateOneDto } from './dto/create-one.dto';
import { UpdateOneDto } from './dto/update-one.dto';

@Controller('one')
export class OneController {
  constructor(private readonly oneService: OneService) {}

  @Get()
  async findAll() {
    //等待3秒钟
    await new Promise((resolve) => {
      setTimeout(() => resolve(''), 3000);
    });
    return [
      { name: '美食', value: 67, itemStyle: { color: '#c23531' } },
      { name: '数码', value: 58, itemStyle: { color: '#cc4587' } },
      { name: '日化', value: 44, itemStyle: { color: '#66dccc' } },
      { name: '蔬菜', value: 32, itemStyle: { color: '#ddcb12' } },
    ];
  }
}

```

## 27.动画设置

```typescript
import { EChartsOption } from "echarts";

let xData = ["美食", "数码", "日化", "蔬菜"];

let yData = [99, 67, 45, 87];

export const options: EChartsOption = {
  title: {
    text: "主标题",
    
  },
  xAxis: {
    data: xData,
    type: "category",
  },
  yAxis: {},
  series: [
    {
      name: "销量",
      data: yData,
      type: "bar",
      barWidth:"30px",
      //最大值/最小值
      //标记点
      markPoint: {
        data: [
          //标注的对象数组，每一项都是一个对象
          {
            type: "max",
            name: "最大值",
          },
          {
            type: "min",
            name: "最小值",
          },
        ],
      },
      //标记线
      markLine:{
        data:[
            {
                type:"average",
                name:"平均值"
            }
        ]
      }
    },
  ],
  legend: {},
  tooltip: {
    trigger: "axis",
    axisPointer: {
      type: "cross",
    },
  },
  //动画相关设置
  animation:true,
  //设置阈值
  animationThreshold:4,
  //持续时间
  animationDuration:5000,
  //延迟
  animationDelay:2000,
  //设置时间曲线
  animationEasing:"circularIn"
};

```

## 28.echarts事件

**echarts.on方法**

1. 第一个参数，监听事件
2. 第二个参数，限制条件
3. 第三个回调函数

```typescript

import axios from "axios";
import * as echarts from "echarts";
import { EChartsOption } from "echarts";
import { onMounted, Ref } from "vue";
export const useEcharts = (options: EChartsOption, dom: Ref<HTMLElement>,theme?:any) =>{
  
  onMounted(async() => {
    //在第二个参数中使用
    const myEcharts = echarts.init(dom.value,theme);
    //开启等待
    myEcharts.showLoading()
    myEcharts.setOption(options);
    //关闭等待
    myEcharts.hideLoading()
    window.onresize = () => {
      myEcharts.resize();
    };

    //事件监听
    /* myEcharts.on('click',(params)=>{
      console.log(params)
    }) */
    //针对特定图形监听
    /* myEcharts.on('click','series.line',(params)=>{
      console.log(params)
    }) */
    //传递对象
    myEcharts.on('click',{name:"数码",seriesType:"line"},(params)=>{
      console.log(params)
    })
  })
};

```



# 实战项目

## 1.技术栈

1. vue3+ts
2. echarts
3. postcss-px-to-viewport
4. axios
5. nest.js

## 2.使用postcss-px-to-viewport适配

```typescript
import { fileURLToPath, URL } from "node:url";

import { defineConfig } from "vite";
import vue from "@vitejs/plugin-vue";
//@ts-ignore
import postCssPxToViewport from "postcss-px-to-viewport";
// https://vitejs.dev/config/
export default defineConfig({
  plugins: [vue()],
  resolve: {
    alias: {
      "@": fileURLToPath(new URL("./src", import.meta.url)),
    },
  },
  css: {
    postcss: {
      plugins: [
        postCssPxToViewport({
          unitToConvert: "px", // 需要转换的单位，默认为"px"
          viewportWidth: 1920, // 设计稿的视口宽度
          unitPrecision: 5, // 单位转换后保留的精度
          propList: ["*"], // 能转化为vw的属性列表
          viewportUnit: "vw", // 希望使用的视口单位
          fontViewportUnit: "vw", // 字体使用的视口单位
          selectorBlackList: [], // 需要忽略的CSS选择器，不会转为视口单位，使用原有的px等单位。
          minPixelValue: 1, // 设置最小的转换数值，如果为1的话，只有大于1的值会被转换
          mediaQuery: false, // 媒体查询里的单位是否需要转换单位
          replace: true, //  是否直接更换属性值，而不添加备用属性
          exclude: undefined, // 忽略某些文件夹下的文件或特定文件，例如 'node_modules' 下的文件
          include: undefined, // 如果设置了include，那将只有匹配到的文件才会被转换
          landscape: false, // 是否添加根据 landscapeWidth 生成的媒体查询条件 @media (orientation: landscape)
          landscapeUnit: "vw", // 横屏时使用的单位
          landscapeWidth: 1920, // 横屏时使用的视口宽度
        }),
      ],
    },
  },
});

```

## 3.lib-flexible适配

#### flexible.js

flexible.js web自适应方案  阿里团队开源的一个库。使用[flexible.js](https://github.com/amfe/lib-flexible)轻松搞定各种不同的移动端设备兼容自适应问题。

1.下载 npm i -S lib-flexible

2.在main.js中进行配置

```typescript
import { createApp } from 'vue'
import App from './App.vue'
import router from './router'
import store from './store'
// 引用
import 'lib-flexible/flexible.js'

createApp(App).use(store).use(router).mount('#app')

```

3.修改flexible配置

因为默认情况下只会在540px分辨率一下生效 所以我们需要根据我们的项目分辨率进行调整

在node_module/lib-flexible/flexible.js中修改代码如下

```typescript
       // 修改原始的
        // if (width / dpr > 540) {
        //     width = 540 * dpr;
        // }
        // var rem = width / 10;

        // 修改成为
          // 最小400px，最大适配2560px
        if (width / dpr < 400) {
            width = 400 * dpr;
        } else if (width / dpr > 2560) {
            width = 2560 * dpr;
        }
        // 设置成24等份，设计稿时1920px的，这样1rem就是80px （1920/24=80）方便使用
        var rem = width / 24;
```



这个时候重启项目大家打开浏览器调试器 即可发现在浏览器大小改变的时候 在html根节点上会自动设置一个font-size

#### cssrem插件

我们在写代码的时候发现如果我们都根据80px为1rem在编写代码的时候转换非常的麻烦 所以我们可以在vscode中安装一个cssrem的插件帮助我们进行转换  这样一来开发过程中会更加的方便

**配置方式**

在vscode扩展中找到  cssrem插件 最新名字叫px to rem & rpx  安装到vscode中 点击右下角设置

修改Root Font Size（基准font-size） 配置项为80即可



## 4.echarts初始化

**hooks抽离，并监听主题变化重新渲染**

```typescript
import type { EChartsOption } from "echarts";
import * as Echarts from 'echarts'
import { onMounted, watch,  type Ref } from "vue";
export const useEcharts = (options: EChartsOption,dom:Ref<HTMLDivElement>,theme:any) => {
    let myCharts!:Echarts.ECharts
    const defaultOptions:EChartsOption={}
    async function init(dom:HTMLDivElement,theme:any){
        myCharts=Echarts.init(dom,theme)
        myCharts.setOption(Object.assign(defaultOptions,options))
        window.onresize=()=>{
            myCharts.resize()
            console.log('==>',Math.random())
        }
    }
    onMounted(() => {
        init(dom.value,theme.value)
    })
    //切换主题
    watch(()=>theme.value,(newValue)=>{
        myCharts.dispose()
        init(dom.value,newValue)
    })
};
```

**为了统一管理主题自定义主题hooks**

```typescript
import { reactive, ref } from "vue";
import { themeOne } from "./themeOne";
import { ThemeTwo } from "./themeTwo";
export const theme = reactive<{ value: any }>({
  value: themeOne,
});
export const useTheme = () => {
  const changeTheme = () => {
    theme.value = theme.value.flag == 'oneTheme'? ThemeTwo: themeOne;
    console.log(theme.value)
  };
  return {
    theme,
    changeTheme,
  };
};
```

## 5.图标容器

只要使用了顶级await，父级得用`<Suspense></Suspense>`

```vue
<template>
    <div class="item">
        <Suspense>
            <slot></slot>
        </Suspense>
    </div>
</template>

<script setup lang="ts">

</script>

<style scoped lang="less">
.item{
    border: 1px solid #1570c5;
    height: 475px;
    margin: 20px;
}
</style>
```

```

```

## 6.获取数据

```typescript
import axios from 'axios'

axios.defaults.baseURL='http://localhost:3000/echarts-data';

export const getOne=async ()=>{
    return (await axios.get('/one')).data.data
}

export const getTwo=async ()=>{
    return (await axios.get('/two')).data.data
}

export const getThree=async ()=>{
    return (await axios.get('/three')).data.data
}

export const getFour=async ()=>{
    return (await axios.get('/four')).data.data
}

export const getMap=async ()=>{
    return (await axios.get('http://localhost:3000/china.json'))
}
```

## 7.图表一

```vue
<template>
    <div ref="dom">

    </div>
</template>

<script setup lang="ts">
import { useEcharts } from '@/hooks/useEcharts';
import type { EChartsOption } from 'echarts';
import * as Echarts from 'echarts'
import { ref, type Ref } from 'vue';
import { getOne } from '../api/echarts'
import { useTheme } from '../stores/useThemeTwo'
//获取dom元素
const dom = ref<HTMLDivElement>()
//主题
const { theme } = useTheme()
//获取数据
const data = await getOne()

const options: EChartsOption = {
    title: {
        text: "销售总量",
        left: "center",
        textStyle: {
            color: "white"
        }
    },
    dataset:[
        {
            source:data
        },
        {
            transform:{
                type:"sort",
                config:{
                    dimension:'num',
                    order:"desc"
                }
            }
        }
    ],
    xAxis: {
        type: "value"
    },
    yAxis: { 
        type: "category"
    },
    legend:{
        left:"left",
        
    },
    tooltip:{
        trigger:"axis",
        axisPointer:{
            type:"cross"
        }
    },
    series: [
        {
            type: "bar",
            name: "销量",
            datasetIndex:0,
            encode:{
                y:'title',
                x:'num'
            },
            barMinWidth:15,
            barMaxWidth:30,
            itemStyle:{
                //设置渐变
                color:new Echarts.graphic.LinearGradient(0,0,1,0,[
                    {
                        offset:0,
                        color:"#22cc33"
                    },
                    {
                        offset:0.33,
                        color:"#44eeaa"
                    },
                    {
                        offset:1,
                        color:"#dd33cc"
                    }
                ]),
                //设置圆角
                borderRadius:[0,20,20,0]
            }
        }
    ],
    grid: {
        top: "20%",
        left: '1%',
        right: '8%',
        bottom: '5%',
        containLabel:true
    }
}

useEcharts(options, dom as Ref<HTMLDivElement>, theme)

</script>

<style scoped>
div {
    height: 100%;
    width: 100%;
}
</style>
```

## 8.图表二

```vue
<template>
    <div ref="dom">

    </div>
</template>

<script setup lang="ts">
import { useEcharts } from '@/hooks/useEcharts';
import type { EChartsOption } from 'echarts';
import * as Echarts from 'echarts'
import { ref, type Ref } from 'vue';
import {  getTwo } from '../api/echarts'
import { useTheme } from '../stores/useThemeTwo'
//获取dom元素
const dom = ref<HTMLDivElement>()
//主题
const { theme } = useTheme()
//获取数据
const data = await getTwo()
const list=['服饰','数码','家电','家居','日化']
const options: EChartsOption = {
    title: {
        text: "周销图",
        left: "center",
        textStyle: {
            color: "white"
        }
    },
    xAxis: {
        type: "category",
        data:data.day,
        boundaryGap:false,
        axisLabel:{
            color:"white"
        },
        axisLine:{
            lineStyle:{
                color:"white"
            }
        }
    },
    yAxis: { 
        type: "value",
        axisLabel:{
            color:"white"
        },
        axisLine:{
            lineStyle:{
                color:"white"
            }
        }
    },
    tooltip:{
        trigger:"axis",
        axisPointer:{
            type:"cross",
            label:{
                backgroundColor:"#e6b600"
            }
        }
    },
    //@ts-ignore
    series: Object.entries(data.num).map((item,index):Echarts.SeriesOption=>({
            type:"line",
            name:list[index],
            data:item[1],
            smooth:true,
            stack:'total',
            areaStyle:{
                opacity:0.8,
                color:new Echarts.graphic.LinearGradient(0,0,0,1,[
                    {
                        offset:0,
                        color:"rgba(128,255,165)"
                    },
                    {
                        offset:1,
                        color:"rgba(1,191,236)"
                    }
                ])
            },
            emphasis:{
                focus:"series"
            }
        })),
    
    legend:{
        top:"bottom",
    },
    grid:{
        left:"1%",
        right:"4%",
        containLabel:true
    }
}

useEcharts(options, dom as Ref<HTMLDivElement>, theme)

</script>

<style scoped>
div {
    height: 100%;
    width: 100%;
}
</style>
```

## 9.图表三

```typescript
<template>
    <div ref="dom">

    </div>
</template>

<script setup lang="ts">
import { useEcharts } from '@/hooks/useEcharts';
import type { EChartsOption } from 'echarts';
import * as Echarts from 'echarts'
import { ref, type Ref } from 'vue';
import {  getThree } from '../api/echarts'
import { useTheme } from '../stores/useThemeTwo'
//获取dom元素
const dom = ref<HTMLDivElement>()
//主题
const { theme } = useTheme()
//获取数据
const data = await getThree()

const options: EChartsOption = {
    title: {
        text: "库存统计",
        left: "center",
        textStyle: {
            color: "white"
        }
    },
    tooltip:{},
    series: [
        {
            type:"pie",
            name:"剩余库存",
            data,
            roseType:"area",
            label:{
                fontSize:15,
            },
            radius:[10,100],
            center:["50%","45%"],
            itemStyle:{
                borderRadius:10
            }
        }
    ],
    legend:{
        bottom:0
    },
    grid: {
        top: "20%",
        left: '1%',
        right: '8%',
        bottom: '5%',
        containLabel:true
    },

}

useEcharts(options, dom as Ref<HTMLDivElement>, theme)

</script>

<style scoped>
div {
    height: 100%;
    width: 100%;
}
</style>
```

## 10.图表四

```vue
<template>
    <div ref="dom">

    </div>
</template>

<script setup lang="ts">
import { useEcharts } from '@/hooks/useEcharts';
import type { EChartsOption } from 'echarts';
import * as Echarts from 'echarts'
import { ref, type Ref } from 'vue';
import { getFour, getOne } from '../api/echarts'
import { useTheme } from '../stores/useThemeTwo'
//获取dom元素
const dom = ref<HTMLDivElement>()
//主题
const { theme } = useTheme()
//获取数据
const data = await getFour()
const list=['服饰','数码','家电','家居','日化']
const options: EChartsOption = {
    title: {
        text: "库存统计图",
        left: "center",
        textStyle: {
            color: "white"
        }
    },
    
    xAxis: {
        data:data.day
    },
    yAxis: { 
        
    },
    //@ts-ignore
    series: Object.entries(data.num).map((item,index):Echarts.SeriesOption=>({
        name:list[index],
        type:"bar",
        data:item[1],
        stack:'total',
        label:{
            show:true
        },
        barMinWidth:15,
        barMaxWidth:30,
        emphasis:{
            focus:"series",
            itemStyle:{
                
            }
        }
    })),
    tooltip:{
        trigger:'axis',
        axisPointer:{
            type:"shadow"
        }
    },
    grid: {
        top: "20%",
        left: '1%',
        right: '8%',
        bottom: '15%',
        containLabel:true
    },
    legend:{
        top:"bottom"
    }
}

useEcharts(options, dom as Ref<HTMLDivElement>, theme)

</script>

<style scoped>
div {
    height: 100%;
    width: 100%;
}
</style>
```

## 11.中央地图

**视觉映射**

```vue
<template>
    <div ref="dom">

    </div>
</template>

<script setup lang="ts">
import { useEcharts } from '@/hooks/useEcharts';
import type { EChartsOption } from 'echarts';
import { ref, type Ref } from 'vue';
import { useTheme } from '@/stores/useThemeTwo'
import { getMap } from '@/api/echarts';
import * as Echarts from 'echarts'
const dom = ref<HTMLDivElement>()
const { theme } = useTheme()
const data = await getMap()
console.log(data.data)
//注册地图
Echarts.registerMap('china', data.data)
/* const theme=ref('dark') */
const options: EChartsOption = {
    title: {
        text: "城市销量",
        left: "center",
        textStyle: {
            color: "white",
            fontSize:20
        }
    },
    geo: {
        type: "map",
        map: 'china',
        roam: true,
        itemStyle: {
            areaColor: "#0099ff",
            borderColor: "#00ffff",
            shadowColor: "#666",
            shadowBlur: 10,
        },
        emphasis: {
            focus: 'self',
        },
    },
    //设置视觉映射
    visualMap:{
        type:"continuous",
        min:100,
        max:5000,
        calculable:true,
        inRange:{
            color:['#50a3ba','#eac376','#d94e5d']
        },
        textStyle:{
            color:"#fff"
        }
    },
    tooltip: {},
    series: [
        {
            type: "scatter",
            name: "城市销量",
            itemStyle: {
                color: "red"
            },
            data: [
                { name: "北京", value: [116.46, 39.92, 4376] },
                { name: "上海", value: [121.48, 31.22, 8657] },
                { name: "深圳", value: [114.07, 22.62, 2461] },
                { name: "广州", value: [113.23, 23.16, 187] },
                { name: "西安", value: [108.45, 34, 3421] },
            ],
            coordinateSystem: "geo"
        }
    ]
}

useEcharts(options, dom as Ref<HTMLDivElement>, theme)
</script>

<style scoped>
div {
    height: 100%;
    width: 100%;
    border: 1px solid #1570c5;
}
</style>
```

## 12.展示

![image-20221201102754596](DataVisualization.assets/image-20221201102754596.png)

![image-20221201102810510](DataVisualization.assets/image-20221201102810510.png)